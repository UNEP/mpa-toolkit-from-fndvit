<script lang="ts">
  import { session } from "$app/stores";

  var cmsLinks = [{
    icon: "M 26.4688 33.6875 C 25.8306 33.6875 25.2185 33.941 24.7673 34.3923 C 24.316 34.8435 24.0625 35.4556 24.0625 36.0938 C 24.0625 36.7319 24.316 37.344 24.7673 37.7952 C 25.2185 38.2465 25.8306 38.5 26.4688 38.5 H 50.5312 C 51.1694 38.5 51.7815 38.2465 52.2327 37.7952 C 52.684 37.344 52.9375 36.7319 52.9375 36.0938 C 52.9375 35.4556 52.684 34.8435 52.2327 34.3923 C 51.7815 33.941 51.1694 33.6875 50.5312 33.6875 H 26.4688 Z M 24.0625 45.7188 C 24.0625 45.0806 24.316 44.4685 24.7673 44.0173 C 25.2185 43.566 25.8306 43.3125 26.4688 43.3125 H 50.5312 C 51.1694 43.3125 51.7815 43.566 52.2327 44.0173 C 52.684 44.4685 52.9375 45.0806 52.9375 45.7188 C 52.9375 46.3569 52.684 46.969 52.2327 47.4202 C 51.7815 47.8715 51.1694 48.125 50.5312 48.125 H 26.4688 C 25.8306 48.125 25.2185 47.8715 24.7673 47.4202 C 24.316 46.969 24.0625 46.3569 24.0625 45.7188 Z M 24.0625 55.3438 C 24.0625 54.7056 24.316 54.0935 24.7673 53.6423 C 25.2185 53.191 25.8306 52.9375 26.4688 52.9375 H 36.0938 C 36.7319 52.9375 37.344 53.191 37.7952 53.6423 C 38.2465 54.0935 38.5 54.7056 38.5 55.3438 C 38.5 55.9819 38.2465 56.594 37.7952 57.0452 C 37.344 57.4965 36.7319 57.75 36.0938 57.75 H 26.4688 C 25.8306 57.75 25.2185 57.4965 24.7673 57.0452 C 24.316 56.594 24.0625 55.9819 24.0625 55.3438 Z",
    icon2: "M 45.7188 0 H 19.25 C 16.6973 0 14.2491 1.01406 12.4441 2.8191 C 10.6391 4.62414 9.625 7.07229 9.625 9.625 V 67.375 C 9.625 69.9277 10.6391 72.3759 12.4441 74.1809 C 14.2491 75.9859 16.6973 77 19.25 77 H 57.75 C 60.3027 77 62.7509 75.9859 64.5559 74.1809 C 66.3609 72.3759 67.375 69.9277 67.375 67.375 V 21.6562 L 45.7188 0 Z M 45.7188 4.8125 V 14.4375 C 45.7188 16.352 46.4793 18.1882 47.8331 19.5419 C 49.1869 20.8957 51.023 21.6562 52.9375 21.6562 H 62.5625 V 67.375 C 62.5625 68.6514 62.0555 69.8754 61.153 70.778 C 60.2504 71.6805 59.0264 72.1875 57.75 72.1875 H 19.25 C 17.9736 72.1875 16.7496 71.6805 15.847 70.778 C 14.9445 69.8754 14.4375 68.6514 14.4375 67.375 V 9.625 C 14.4375 8.34865 14.9445 7.12457 15.847 6.22205 C 16.7496 5.31953 17.9736 4.8125 19.25 4.8125 H 45.7188 Z",
    path: "pages",
    title: "PAGES"
  }, {
    icon: "M 28.875 21.6562 C 28.875 23.5708 28.1145 25.4069 26.7607 26.7607 C 25.4069 28.1145 23.5708 28.875 21.6562 28.875 C 19.7417 28.875 17.9056 28.1145 16.5518 26.7607 C 15.198 25.4069 14.4375 23.5708 14.4375 21.6562 C 14.4375 19.7417 15.198 17.9056 16.5518 16.5518 C 17.9056 15.198 19.7417 14.4375 21.6562 14.4375 C 23.5708 14.4375 25.4069 15.198 26.7607 16.5518 C 28.1145 17.9056 28.875 19.7417 28.875 21.6562 Z M 24.0625 21.6562 C 24.0625 21.0181 23.809 20.406 23.3577 19.9548 C 22.9065 19.5035 22.2944 19.25 21.6562 19.25 C 21.0181 19.25 20.406 19.5035 19.9548 19.9548 C 19.5035 20.406 19.25 21.0181 19.25 21.6562 C 19.25 22.2944 19.5035 22.9065 19.9548 23.3577 C 20.406 23.809 21.0181 24.0625 21.6562 24.0625 C 22.2944 24.0625 22.9065 23.809 23.3577 23.3577 C 23.809 22.9065 24.0625 22.2944 24.0625 21.6562 Z",
    icon2: "M 9.625 4.8125 H 31.6951 C 32.9714 4.81277 34.1953 5.31998 35.0976 6.22256 L 68.7851 39.9101 C 69.6873 40.8125 70.1941 42.0364 70.1941 43.3125 C 70.1941 44.5886 69.6873 45.8125 68.7851 46.7149 L 46.7149 68.7851 C 45.8125 69.6873 44.5886 70.1941 43.3125 70.1941 C 42.0364 70.1941 40.8125 69.6873 39.9101 68.7851 L 6.22256 35.0976 C 5.31998 34.1953 4.81277 32.9714 4.8125 31.6951 V 9.625 C 4.8125 8.34865 5.31953 7.12457 6.22205 6.22205 C 7.12457 5.31953 8.34865 4.8125 9.625 4.8125 Z M 9.625 31.6951 L 43.3125 65.3826 L 65.3826 43.3125 L 31.6951 9.625 H 9.625 V 31.6951 Z",

    path: "",
    title: "TAGS"
  },{
    icon: "M 38.5 38.5 C 42.3291 38.5 46.0013 36.9789 48.7089 34.2714 C 51.4164 31.5638 52.9375 27.8916 52.9375 24.0625 C 52.9375 20.2334 51.4164 16.5612 48.7089 13.8536 C 46.0013 11.1461 42.3291 9.625 38.5 9.625 C 34.6709 9.625 30.9987 11.1461 28.2911 13.8536 C 25.5836 16.5612 24.0625 20.2334 24.0625 24.0625 C 24.0625 27.8916 25.5836 31.5638 28.2911 34.2714 C 30.9987 36.9789 34.6709 38.5 38.5 38.5 Z M 48.125 24.0625 C 48.125 26.6152 47.1109 29.0634 45.3059 30.8684 C 43.5009 32.6734 41.0527 33.6875 38.5 33.6875 C 35.9473 33.6875 33.4991 32.6734 31.6941 30.8684 C 29.8891 29.0634 28.875 26.6152 28.875 24.0625 C 28.875 21.5098 29.8891 19.0616 31.6941 17.2566 C 33.4991 15.4516 35.9473 14.4375 38.5 14.4375 C 41.0527 14.4375 43.5009 15.4516 45.3059 17.2566 C 47.1109 19.0616 48.125 21.5098 48.125 24.0625 Z M 67.375 62.5625 C 67.375 67.375 62.5625 67.375 62.5625 67.375 H 14.4375 C 14.4375 67.375 9.625 67.375 9.625 62.5625 C 9.625 57.75 14.4375 43.3125 38.5 43.3125 C 62.5625 43.3125 67.375 57.75 67.375 62.5625 Z M 62.5625 62.5433 C 62.5577 61.3594 61.8214 57.7981 58.5585 54.5352 C 55.4207 51.3975 49.5158 48.125 38.5 48.125 C 27.4794 48.125 21.5793 51.3975 18.4415 54.5352 C 15.1786 57.7981 14.4471 61.3594 14.4375 62.5433 H 62.5625 Z",
    icon2: "",

    path: "users",
    title: "USERS"
  }];

</script>

<div class="cms-homepage">

  {#if $session.user === undefined}
  
    <h2>WELCOME</h2>  
  
    <div class="signIn-button">
      <a href="/api/auth/signin/google">
        Sign in with Google
      </a>
    </div>
  
  {:else}

    <h3>WELCOME {$session.user.name}</h3>

    <div class="grid-links">

      {#each cmsLinks as link}
        {#if link.path == "users" && $session.user.role == "ADMIN" || link.path != "users"}
          <a href="/cms/{link.path}">
            <div class="cms-links">
              <div>
                <svg width="77" height="77" >
                  <path d={link.icon} stroke-width="1.5"/>
                  <path d={link.icon2} stroke-width="1.5"/>
                </svg>
              </div>
              <p>{ link.title }</p>
            </div></a>
          {/if}
      {/each}

    </div>
      
    <div style="margin-top: 40px">
      <a href="/api/auth/signout">Signout</a>
    </div>
  {/if}
</div>

<style lang="stylus">

 .cms-homepage {

    position: fixed; 
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;

    h2 {
      typography: h2-responsive;
      margin-bottom: 30px;
      text-align: center;
    }

    h3 {
      typography: h3-light-responsive;
      margin-bottom: 40px;
      text-align: center;
    }

    a {
      typography: ui-small;
      color: black;
      text-decoration: none;
    }
  }

  .signIn-button {

    padding: 1.5rem;
    width: 275px;
    background: $colors.neutral-light;
    border-radius: 24px;

  }  

  .grid-links {

    display: grid;
    grid-template-columns: auto auto auto;
    grid-gap: 24px;

  }

  .cms-links {

    background: white;
    border-radius: 24px;
    box-shadow: 0px 1px 16px rgba(0, 0, 0, 0.1); 
    width: 185px;
    height: 140px;

    &:hover{
      background: $colors.neutral-light;
    }

    svg {
      margin-top: 20px;
    }
  }

</style>
